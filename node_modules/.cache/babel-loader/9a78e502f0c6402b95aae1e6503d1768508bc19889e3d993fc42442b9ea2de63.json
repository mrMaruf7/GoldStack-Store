{"ast":null,"code":"import _objectSpread from\"H:/Project/GoldStack_Store/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push('/payment');}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};// 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",cart.paymentMethod]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{children:cart.cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[item.qty,\" x \\u20B9\",item.price,\" = \\u20B9\",item.qty*item.price]})]})},item.product);})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.itemsPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.shippingPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.taxPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Order Total\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",cart.totalPrice.toFixed(2)]})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:placeOrderHandler,className:\"primary block\",disabled:cart.cartItems.length===0,children:\"Place Order\"})}),loading&&/*#__PURE__*/_jsx(LoadingBox,{}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error})]})})})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","jsx","_jsx","jsxs","_jsxs","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","_objectSpread","orderItems","concat","_id","type","children","step1","step2","step3","step4","className","shippingAddress","fullName","address","city","postalCode","country","map","item","src","image","alt","name","to","product","onClick","disabled","length","variant"],"sources":["H:/Project/GoldStack_Store/frontend/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { createOrder } from '../actions/orderActions';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\nexport default function PlaceOrderScreen(props) {\r\n  const cart = useSelector((state) => state.cart);\r\n  if (!cart.paymentMethod) {\r\n    props.history.push('/payment');\r\n  }\r\n  const orderCreate = useSelector((state) => state.orderCreate);\r\n  const { loading, success, error, order } = orderCreate;\r\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\r\n  cart.itemsPrice = toPrice(\r\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\r\n  );\r\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\r\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\r\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\r\n  const dispatch = useDispatch();\r\n  const placeOrderHandler = () => {\r\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\r\n  };\r\n  useEffect(() => {\r\n    if (success) {\r\n      props.history.push(`/order/${order._id}`);\r\n      dispatch({ type: ORDER_CREATE_RESET });\r\n    }\r\n  }, [dispatch, order, props.history, success]);\r\n  return (\r\n    <div>\r\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\r\n      <div className=\"row top\">\r\n        <div className=\"col-2\">\r\n          <ul>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Shipping</h2>\r\n                <p>\r\n                  <strong>Name:</strong> {cart.shippingAddress.fullName} <br />\r\n                  <strong>Address: </strong> {cart.shippingAddress.address},\r\n                  {cart.shippingAddress.city}, {cart.shippingAddress.postalCode}\r\n                  ,{cart.shippingAddress.country}\r\n                </p>\r\n              </div>\r\n            </li>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Payment</h2>\r\n                <p>\r\n                  <strong>Method:</strong> {cart.paymentMethod}\r\n                </p>\r\n              </div>\r\n            </li>\r\n            <li>\r\n              <div className=\"card card-body\">\r\n                <h2>Order Items</h2>\r\n                <ul>\r\n                  {cart.cartItems.map((item) => (\r\n                    <li key={item.product}>\r\n                      <div className=\"row\">\r\n                        <div>\r\n                          <img\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            className=\"small\"\r\n                          ></img>\r\n                        </div>\r\n                        <div className=\"min-30\">\r\n                          <Link to={`/product/${item.product}`}>\r\n                            {item.name}\r\n                          </Link>\r\n                        </div>\r\n                        <div>\r\n                          {item.qty} x ₹{item.price} = ₹{item.qty * item.price}\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"col-1\">\r\n          <div className=\"card card-body\">\r\n            <ul>\r\n              <li>\r\n                <h2>Order Summary</h2>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Items</div>\r\n                  <div>₹{cart.itemsPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Shipping</div>\r\n                  <div>₹{cart.shippingPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>Tax</div>\r\n                  <div>₹{cart.taxPrice.toFixed(2)}</div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"row\">\r\n                  <div>\r\n                    <strong> Order Total</strong>\r\n                  </div>\r\n                  <div>\r\n                    <strong>₹{cart.totalPrice.toFixed(2)}</strong>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={placeOrderHandler}\r\n                  className=\"primary block\"\r\n                  disabled={cart.cartItems.length === 0}\r\n                >\r\n                  Place Order\r\n                </button>\r\n              </li>\r\n              {loading && <LoadingBox></LoadingBox>}\r\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}