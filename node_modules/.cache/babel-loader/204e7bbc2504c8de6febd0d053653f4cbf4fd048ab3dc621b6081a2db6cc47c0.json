{"ast":null,"code":"import _toConsumableArray from\"H:/Project/GoldStack_Store/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{addToCart,removeFromCart}from\"../actions/cartActions\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(props){var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){// delete action\ndispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){props.history.push(\"/signin?redirect=shipping\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-2\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",item.price]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Delete\"})})]})},item.product);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : \\u20B9\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:checkoutHandler,className:\"primary block\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})]})})})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","addToCart","removeFromCart","MessageBox","jsx","_jsx","jsxs","_jsxs","CartScreen","props","productId","match","params","id","qty","location","search","Number","split","cart","state","cartItems","dispatch","removeFromCartHandler","checkoutHandler","history","push","className","children","length","to","map","item","src","image","alt","name","concat","product","value","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","price","type","onClick","reduce","a","c","disabled"],"sources":["H:/Project/GoldStack_Store/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { addToCart , removeFromCart } from \"../actions/cartActions\";\r\nimport MessageBox from \"../components/MessageBox\";\r\n\r\nexport default function CartScreen(props) {\r\n  const productId = props.match.params.id;\r\n  const qty = props.location.search\r\n    ? Number(props.location.search.split(\"=\")[1])\r\n    : 1;\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    // delete action\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    props.history.push(\"/signin?redirect=shipping\");\r\n  };\r\n  return (\r\n    <div className=\"row top\">\r\n      <div className=\"col-2\">\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <MessageBox>\r\n            Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n          </MessageBox>\r\n        ) : (\r\n          <ul>\r\n            {cartItems.map((item) => (\r\n              <li key={item.product}>\r\n                <div className=\"row\">\r\n                  <div>\r\n                    <img\r\n                      src={item.image}\r\n                      alt={item.name}\r\n                      className=\"small\"\r\n                    ></img>\r\n                  </div>\r\n                  <div className=\"min-30\">\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </div>\r\n                  <div>\r\n                    <select\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div>₹{item.price}</div>\r\n                  <div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n      <div className=\"col-1\">\r\n        <div className=\"card card-body\">\r\n          <ul>\r\n            <li>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((a, c) => a + c.qty, 0)} items) : ₹\r\n                {cartItems.reduce((a, c) => a + c.price * c.qty, 0)}\r\n              </h2>\r\n            </li>\r\n            <li>\r\n              <button\r\n                type=\"button\"\r\n                onClick={checkoutHandler}\r\n                className=\"primary block\"\r\n                disabled={cartItems.length === 0}\r\n              >\r\n                Proceed to Checkout\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}