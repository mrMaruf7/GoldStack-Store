{"ast":null,"code":"import _toConsumableArray from\"H:/Project/GoldStack_Store/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import{createProduct,deleteProduct,listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductListScreen(props){var _useParams=useParams(),_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var sellerMode=props.match.path.indexOf('/seller')>=0;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});props.history.push(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:'',pageNumber:pageNumber}));},[createdProduct,dispatch,props.history,sellerMode,successCreate,successDelete,userInfo._id,pageNumber]);var deleteHandler=function deleteHandler(product){if(window.confirm('Are you sure to delete?')){dispatch(deleteProduct(product._id));}};var createHandler=function createHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler,children:\"Create Product\"})]}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/product/\".concat(product._id,\"/edit\"));},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);},children:\"Delete\"})]})]},product._id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row center pagination\",children:_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/_jsx(Link,{className:x+1===page?'active':'',to:\"/productlist/pageNumber/\".concat(x+1),children:x+1},x+1);})})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","useParams","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductListScreen","props","_useParams","_useParams$pageNumber","pageNumber","sellerMode","match","path","indexOf","productList","state","loading","error","products","page","pages","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","history","push","concat","_id","seller","deleteHandler","window","confirm","createHandler","children","className","onClick","variant","map","name","price","category","brand","_toConsumableArray","Array","keys","x","to"],"sources":["H:/Project/GoldStack_Store/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport {\r\n  createProduct,\r\n  deleteProduct,\r\n  listProducts,\r\n} from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport {\r\n  PRODUCT_CREATE_RESET,\r\n  PRODUCT_DELETE_RESET,\r\n} from '../constants/productConstants';\r\n\r\nexport default function ProductListScreen(props) {\r\n  const { pageNumber = 1 } = useParams();\r\n  const sellerMode = props.match.path.indexOf('/seller') >= 0;\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, error, products, page, pages } = productList;\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete;\r\n\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successCreate) {\r\n      dispatch({ type: PRODUCT_CREATE_RESET });\r\n      props.history.push(`/product/${createdProduct._id}/edit`);\r\n    }\r\n    if (successDelete) {\r\n      dispatch({ type: PRODUCT_DELETE_RESET });\r\n    }\r\n    dispatch(\r\n      listProducts({ seller: sellerMode ? userInfo._id : '', pageNumber })\r\n    );\r\n  }, [\r\n    createdProduct,\r\n    dispatch,\r\n    props.history,\r\n    sellerMode,\r\n    successCreate,\r\n    successDelete,\r\n    userInfo._id,\r\n    pageNumber,\r\n  ]);\r\n\r\n  const deleteHandler = (product) => {\r\n    if (window.confirm('Are you sure to delete?')) {\r\n      dispatch(deleteProduct(product._id));\r\n    }\r\n  };\r\n  const createHandler = () => {\r\n    dispatch(createProduct());\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n        <h1>Products</h1>\r\n        <button type=\"button\" className=\"primary\" onClick={createHandler}>\r\n          Create Product\r\n        </button>\r\n      </div>\r\n\r\n      {loadingDelete && <LoadingBox></LoadingBox>}\r\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\r\n\r\n      {loadingCreate && <LoadingBox></LoadingBox>}\r\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\r\n      {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th>ACTIONS</th>\r\n              </tr>\r\n              </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() =>\r\n                        props.history.push(`/product/${product._id}/edit`)\r\n                      }\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() => deleteHandler(product)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div className=\"row center pagination\">\r\n            {[...Array(pages).keys()].map((x) => (\r\n              <Link\r\n                className={x + 1 === page ? 'active' : ''}\r\n                key={x + 1}\r\n                to={`/productlist/pageNumber/${x + 1}`}\r\n              >\r\n                {x + 1}\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}